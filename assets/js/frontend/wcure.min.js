jQuery(function(t){if("undefined"==typeof wcure_params)return!1;var e=wcure_params.ajax_url,i={init:function(e){this.add_setting=this.add_setting.bind(this),this.remove_setting=this.remove_setting.bind(this),this.save_settings=this.save_settings.bind(this),this.settings_list=e,this.input_field=t(document.body).find('input[name="remote_entries_user_settings"]'),t(document).on("click",".wcure-button-add-setting",this.add_setting),t(document).on("click",".wcure-user-settings-list-item a.remove",this.remove_setting),t(document).on("click",'.button[name="save_remote_entries_settings"]',this.save_settings)},add_setting:function(t){t.preventDefault(),this.input_field.val()&&(this.settings_list.create_setting(this.input_field.val()),this.input_field.val(""))},remove_setting:function(e){e.preventDefault();var i=t(e.target).parent("li.wcure-user-settings-list-item");this.settings_list.remove_setting(i.data("setting-key"))},save_settings:function(i,s){if(!0!==s){i.preventDefault(),t(".woocommerce-notices-wrapper:first").html("");var n={action:"wcure_update_user_settings",data:this.settings_list.get_settings(),nonce:t('input[name="save-remote-entries-settings-nonce"]').val()};t.ajax({type:"post",url:e,data:n,dataType:"json",success:function(){t(i.target).trigger("click",!0)},error:function(e){!function(e,i="error"){t(".woocommerce-notices-wrapper:first").prepend(`<div class="woocommerce-${i}">\n${e}\n</div>`)}(e.responseJSON.data.error)}})}}},s={init:function(){this.create_setting=this.create_setting.bind(this),this.get_setting_id=this.get_setting_id.bind(this),this.get_settings=this.get_settings.bind(this),this.update_settings=this.update_settings.bind(this),this.list_element=t(".wcure-user-settings-list"),this.update_settings()},create_setting:function(t){var e=`\n<li class="wcure-user-settings-list-item" data-setting-key="${this.get_setting_id()}">\n<a href="#" class="remove">x</a>\n<p class="wcure-user-settings-list-item-value">${t}</p>\n</li>`;this.list_element.append(e),this.update_settings()},remove_setting:function(t){n.remove(t),this.update_settings()},get_setting_id:function(){return this.settings.length},get_settings:function(){return this.settings.reduce((t,e)=>(t[e]=n.value(e),t),{})},update_settings:function(){var e=[];this.list_element.children(".wcure-user-settings-list-item").each(function(i){t(this).attr("data-setting-key",i),e.push(i)}),this.settings=e}},n={is_item:function(e){return void 0!==t(".wcure-user-settings-list").find(`.wcure-user-settings-list-item[data-setting-key="${e}"]`)},value:function(e){return t(".wcure-user-settings-list").find(`.wcure-user-settings-list-item[data-setting-key="${e}"]`).find(".wcure-user-settings-list-item-value").text()},remove:function(e){t(".wcure-user-settings-list").find(`.wcure-user-settings-list-item[data-setting-key="${e}"]`).remove()}};i.init(s),s.init(),{init:function(){this.get_entries=this.get_entries.bind(this),this.populate_entries=this.populate_entries.bind(this),this.entries_container=t(".wcure-remote-entries-container"),this.get_entries()},get_entries:function(){t.ajax({type:"get",url:e,data:{action:"wcure_get_remote_entries"},dataType:"json",success:function(e){t(".wcure-remote-entries-container").html(e)},error:function(e){t(".woocommerce-notices-wrapper").html(e)}})},populate_entries:function(e){var i="";Object.keys(e).forEach(function(t){i+=`\n<li class="wcure-remote-entries-item">\n${t}: ${e[t]}\n</li>`}),t("ul.wcure-remote-entries-list").html(i)}}.init()});